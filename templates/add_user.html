<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>add_user</title>
  <!-- <link rel="stylesheet" href="style.css"> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Bootstrap Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">



  <!-- Latest compiled JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Bootstrap Datepicker Stylesheet and Script -->
  <!-- Option 1: Include in HTML -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/js/bootstrap-datepicker.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='vendor/fontawesome-free/css/all.min.css') }}">
  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet" href="{{ url_for('static', filename='vendor/fontawesome-free/css/all.min.css') }}">



  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/sb-admin-2.css') }}">
</head>


<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

      <!-- Sidebar - Brand -->
      <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/">
        <!-- <div class="sidebar-brand-icon rotate-n-15" >
                <img src="{{ url_for('static', filename='img/1200px-PTT-01.svg (1).png') }}" style="width: 40%;" alt="">
            </div> -->
        <div class="sidebar-brand-text mx-3" style="margin-top: 10px;">PTT<p style="font-size: xx-small;">AUTOMATIC
            METER READING</p>
        </div>

      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0">

      <!-- Nav Item - Dashboard -->
      <!-- Nav Item - Dashboard -->
      <li class="nav-item active">
        <a class="nav-link" href="/">
          <i class="fas fa-fw fa-chart-area"></i>
          <span>Dashboard</span></a>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->
      <div class="sidebar-heading">
        Interface
      </div>

      <!-- Nav Item - Pages Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true"
          aria-controls="collapseTwo">
          <i class="fas fa-fw fa-table"></i>
          <span>Reports</span>
        </a>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">
            <h6 class="collapse-header">List Reports:</h6>
            <a class="collapse-item" href="billing_data">View Billing Data</a>
            <a class="collapse-item" href="#">View EVC Status</a>
            <a class="collapse-item" href="DailySummary">Daily Summary</a>
            <a class="collapse-item" href="#">Monthly Summary</a>
            <a class="collapse-item" href="site_detail">Site Detail</a>
          </div>
        </div>
      </li>
      <hr class="sidebar-divider">
      <div class="sidebar-heading">
        Manage
      </div>
      <!-- Nav Item - Utilities Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePages" aria-expanded="true"
          aria-controls="collapsePages">
          <i class="fas fa-user-cog"></i>


          <span>Manage Users</span>
        </a>
        <div id="collapsePages" class="collapse" aria-labelledby="headingPages" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">
            <h6 class="collapse-header">List Manage Users:</h6>
            <a class="collapse-item" href="add_user">Add User</a>
            <a class="collapse-item" href="edit_user">Edit User</a>
            <a class="collapse-item" href="remove_user">Remove User</a>
            <a class="collapse-item" href="user_history">User History</a>
          </div>
        </div>
      </li>

      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUtilities"
          aria-expanded="true" aria-controls="collapseUtilities">
          <i class="fas fa-sitemap"></i>




          <span>Manage Sites</span>
        </a>
        <div id="collapseUtilities" class="collapse" aria-labelledby="headingUtilities" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">
            <h6 class="collapse-header">List Manage Site:</h6>
            <a class="collapse-item" href="add_site">Add Site</a>
            <a class="collapse-item" href="edit_site">Edit Site</a>
            <a class="collapse-item" href="remove_site">Remove Site</a>

          </div>
        </div>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->
      <div class="sidebar-heading">
        Polling
      </div>

      <!-- Nav Item - Pages Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePolling"
          aria-expanded="true" aria-controls="collapsePolling">
          <i class="fas fa-cogs"></i>



          <span>Polling Setting</span>
        </a>
        <div id="collapsePolling" class="collapse" aria-labelledby="headingPolling" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">
            <h6 class="collapse-header">List Polling Setting:</h6>
            <a class="collapse-item" href="evc_management">EVC Management</a>
            <a class="collapse-item" href="polling_route">Polling Range Setting</a>
            <a class="collapse-item" href="polling_hourly">Polling Range Hourly</a>
            <a class="collapse-item" href="mapping_config">Configuration Mapping</a>
            <a class="collapse-item" href="mapping_billing">Daily Billing Mapping</a>
            <a class="collapse-item" href="mapping_hourly">Hourly Billing Mapping</a>

          </div>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseActions"
          aria-expanded="true" aria-controls="collapseActions">
          <i class="fas fa-fw fa-wrench"></i>
          <span>Polling Actions</span>
        </a>
        <div id="collapseActions" class="collapse" aria-labelledby="headingActions" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">
            <h6 class="collapse-header">List Polling Actions:</h6>
            <a class="collapse-item" href="Manualpoll_data">Manual Poll (EVC Profile)</a>
            <a class="collapse-item" href="write_evc">Write Config (SG,CO2,N2)</a>


          </div>
        </div>
      </li>

      <hr class="sidebar-divider">
      <div class="sidebar-heading">
        Prediction
      </div>

      <!-- Nav Item - Pages Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseai" aria-expanded="true"
          aria-controls="collapseai">
          <i class="fas fa-robot"></i>
          <span>AI Prediction</span>

        </a>
        <div id="collapseai" class="collapse" aria-labelledby="headingai" data-parent="#accordionSidebar">
          <div class="bg-white py-2 collapse-inner rounded">
            <h6 class="collapse-header">List AI Prediction:</h6>

            <a class="collapse-item" href="Numeric_Prediction">Numeric Prediction</a>


          </div>
        </div>
      </li>
      <!-- Nav Item - Tables -->

      <!-- Divider -->
      <hr class="sidebar-divider d-none d-md-block">

      <!-- Sidebar Toggler (Sidebar) -->
      <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0" id="sidebarToggle"></button>
      </div>

    </ul>
    <!-- End of Sidebar -->
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <!-- Topbar -->
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

          <!-- Sidebar Toggle (Topbar) -->
          <form class="form-inline">
            <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
              <i class="fa fa-bars"></i>
            </button>
          </form>

          <!-- Topbar Search -->
          <form class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
            <div class="input-group">
              <div class="input-group-append"
                style="padding: 0px 20px; display: inline-block; width: 40%;border-radius: 15px;margin-left: -40px;">
                <img src="https://www.pttplc.com/uploads/About/logo_PTT_3.png"
                style="width: 100%;display: block;height: auto" alt="">
              </div>
            </div>
          </form>

          <!-- Topbar Navbar -->
          <ul class="navbar-nav ml-auto">

            <!-- Nav Item - Search Dropdown (Visible Only XS) -->
            <li class="nav-item dropdown no-arrow d-sm-none">
              <a class="nav-link dropdown-toggle" href="#" id="searchDropdown" role="button" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-search fa-fw"></i>
              </a>
              <!-- Dropdown - Messages -->
              <div class="dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in"
                aria-labelledby="searchDropdown">
                <form class="form-inline mr-auto w-100 navbar-search">
                  <div class="input-group">
                    <input type="text" class="form-control bg-light border-0 small" placeholder="Search for..."
                      aria-label="Search" aria-describedby="basic-addon2">
                    <div class="input-group-append">
                      <button class="btn btn-primary" type="button">
                        <i class="fas fa-search fa-sm"></i>
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </li>




            <div class="topbar-divider d-none d-sm-block"></div>

            <!-- Nav Item - User Information -->
            <li class="nav-item dropdown no-arrow">
              <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <span class="mr-2 d-none d-lg-inline text-gray-600 small">{{user_update}}</span>
                <i class="fa-solid fa-user fa-lg" style="color: #e5e9f6;"></i>
              </a>
              <!-- Dropdown - User Information -->
              <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
                <a class="dropdown-item" href="#">
                  <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                  Profile
                </a>
                <a class="dropdown-item" href="#">
                  <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
                  Settings
                </a>
                <a class="dropdown-item" href="#">
                  <i class="fas fa-list fa-sm fa-fw mr-2 text-gray-400"></i>
                  Activity Log
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="logout">
                  <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                  Logout
                </a>
              </div>
            </li>

          </ul>

        </nav>
        <!-- End of Topbar -->



        <!-- sidebar-wrapper  -->
        <div class="container-fluid">

          <!-- Page Heading -->
          {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
          <ul class="flashes">
            {% for category, message in messages %}
            <li class="alert alert-{{ 'danger' if category == 'error' else category }}">{{ message }}</li>
            {% endfor %}
          </ul>
          {% endif %}
          {% endwith %}


          <div class="card shadow mb-4" style="width: 100%;">
            <div class="card-header py-3">
              <h6 class="m-0 font-weight-bold text-primary">Add User</h6>

            </div>

            <form method="post" action="{{ url_for('add_user_route') }}" class="form-container" style="padding: 40px;">
              <div class="form-group">
                <label for="description">Description:</label>
                <input type="text" class="form-control bg-light  small" id="description" name="description"
                  placeholder="Enter description" style="border-radius: 5px;" required>
              </div>

              <div class="form-group">
                <label for="user_name">Username:</label>
                <input type="text" class="form-control bg-light  small" id="user_name" name="user_name"
                  placeholder="Enter username" style="border-radius: 5px;" required>
              </div>

              <div class="form-group">
                <label for="password">Password:</label>
                <div class="password-container">
                    <input type="password" class="form-control bg-light  small" id="password" name="password"
                          placeholder="Enter password" style="border-radius: 5px;" required>
                    <i id="togglePassword" class="eye-icon fas fa-eye"></i>
                </div>
                <div id="passwordMessage" class="validation-message"></div>
              </div>

              <div class="form-group">
                <label for="user_level">User Level:</label>
                <select class="form-control bg-light small" id="user_level" name="user_level"
                    style="border-radius: 5px;" required>
                    <option value="" disabled selected>Select user level</option>
                    
                    <!-- Loop through name_group and display user_level and user_group in the options -->
                    {% for user_level, user_group in name_group %}
                        <option value="{{ user_level }}">{{ user_group }}</option>
                    {% endfor %}
                    
                </select>
            </div>
            

              <button id="submitButton" class="btn btn-success btn-icon-split mx-2" type="submit" disabled>
                <span class="text">Add User</span>
            </button>
            </form>



            </main>
</body>
 <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
 <script>
  var passwordInput = document.getElementById('password');
  var eyeIcon = document.getElementById('togglePassword');
  var messageElement = document.getElementById('passwordMessage');
  var submitButton = document.getElementById('submitButton');

  // Event listener to validate password as the user types
  passwordInput.addEventListener('input', function() {
      var password = this.value;
      var validationResult = validatePassword(password);

      // Show password validation message
      if (validationResult.valid) {
          messageElement.textContent = 'Password is valid.';
          messageElement.classList.remove('invalid');
          messageElement.classList.add('valid');
          submitButton.disabled = false; // Enable the submit button
      } else {
          messageElement.textContent = validationResult.message;
          messageElement.classList.remove('valid');
          messageElement.classList.add('invalid');
          submitButton.disabled = true; // Disable the submit button
      }

      // Show or hide the eye icon based on password input
      eyeIcon.style.display = password.length > 0 ? 'block' : 'none';
  });

  // Function to validate password based on length, letter, number, and special character criteria
  function validatePassword(password) {
      var lengthCriteria = password.length >= 8 && password.length <= 12;
      var letterUpperCriteria = /[A-Z]/.test(password);
      var letterLowerCriteria = /[a-z]/.test(password);
      var numberCriteria = /[0-9]/.test(password);
      var specialCharCriteria = /[!@#$%^&*()_+{}\[\]:;"'<>,.?~]/.test(password); // Special character check
      var message = '';

      if (!lengthCriteria) message += '8-12 characters required. ';
      if (!letterUpperCriteria) message += 'Include at least one uppercase letter. ';
      if (!letterLowerCriteria) message += 'Include at least one lowercase letter. ';
      if (!numberCriteria) message += 'Include at least one number. ';
      if (!specialCharCriteria) message += 'Include at least one special character. ';

      return {
          valid: lengthCriteria && letterUpperCriteria && letterLowerCriteria && numberCriteria && specialCharCriteria,
          message: message.trim()
      };
  }

  // Toggle password visibility
  eyeIcon.addEventListener('click', function() {
      var type = passwordInput.type === 'password' ? 'text' : 'password';
      passwordInput.type = type;
      this.classList.toggle('fa-eye');
      this.classList.toggle('fa-eye-slash');
  });
</script>
<script>
  function saveToOracle() {
    // Collect data from the Poll Configure form
    var configureData = collectFormData('start_config', 'end_config', 'enable_config');

    // Collect data from the Poll Billing form
    var billingData = collectFormData('billing_start', 'billing_end', 'enable_billing');

    // You can now send the data to your backend or perform any other necessary actions
    console.log('Configure Data:', configureData);
    console.log('Billing Data:', billingData);

    // Add your logic to save data to Oracle here
  }

  function collectFormData(startName, endName, enableName) {
    var data = {
      list: [],
      enableList: []
    };

    // Collect data from the form
    $('input[name^=' + startName + ']').each(function (index, element) {
      var startValue = $(element).val();
      var endValue = $('input[name=' + endName + ']').eq(index).val();
      data.list.push({ start: startValue, end: endValue });
    });

    // Collect enable data from the form
    $('input[name^=' + enableName + ']').each(function (index, element) {
      data.enableList.push($(element).prop('checked') ? '1' : '0');
    });

    return data;
  }


  function submitForm() {
    // Trigger the form submission
    document.getElementById("pollingForm").submit();
  }

  // Add an event listener to dynamically update the dropdown options
  document.getElementById("type_dropdown").addEventListener("change", function () {
    // Get the selected value
    var selectedtype = this.value;

    // Hide the "All" option if no type is selected
    var allOption = this.options[0];
    if (selectedtype) {
      allOption.style.display = "none";
    } else {
      allOption.style.display = "block";
    }
  });
</script>

<script>
  function checkInternetConnection() {
    // ตรวจสอบสถานะเชื่อมต่ออินเทอร์เน็ต
    // ตรวจสอบได้ว่ามีการเชื่อมต่อหรือไม่ โดยใช้ navigator.onLine
    return navigator.onLine;
  }

  // JavaScript
  function updateStatus() {
    var statusContainer = document.getElementById('status-container');
    var statusIcon = document.getElementById('status-icon');
    var statusText = document.getElementById('status-text');
    var lastUpdate = document.getElementById('last-update-time');

    var now = new Date();
    var timeString = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true });

    if (checkInternetConnection()) {
      // ถ้าเชื่อมต่ออินเทอร์เน็ต
      statusIcon.style.color = 'green'; // สีเขียว
      statusText.textContent = 'Online';
      statusText.classList.remove('offline'); // ลบ class 'offline' ถ้ามี
    } else {
      // ถ้าไม่เชื่อมต่ออินเทอร์เน็ต
      statusIcon.style.color = 'red'; // สีแดง
      statusText.textContent = 'Offline';
      statusText.classList.add('offline'); // เพิ่ม class 'offline'
    }

    lastUpdate.textContent = timeString;
  }
  // JavaScript
  setInterval(updateStatus, 10000); // อัปเดตทุก 1 วินาที (1000 มิลลิวินาที)

</script>
<script>
  // Function to update weather icon
  function updateWeatherIcon(weatherCondition) {
    var iconClass;

    // Add logic to determine the appropriate weather icon based on the condition
    switch (weatherCondition.toLowerCase()) {
      case 'clear':
        iconClass = 'fas fa-sun'; // Font Awesome sun icon
        break;
      case 'clouds':
        iconClass = 'fas fa-cloud'; // Font Awesome cloud icon
        break;
      case 'rain':
        iconClass = 'fas fa-cloud-showers-heavy'; // Font Awesome rain icon
        break;
      case 'thunderstorm':
        iconClass = 'fas fa-bolt'; // Font Awesome thunderstorm icon
        break;
      case 'snow':
        iconClass = 'fas fa-snowflake'; // Font Awesome snow icon
        break;
      default:
        iconClass = 'fas fa-question-circle'; // Default to a question mark icon for unknown conditions
    }

    // Set the appropriate icon class
    document.getElementById('weather-icon').innerHTML = '<i class="' + iconClass + '"></i>';
  }

</script>
<script>
  // Function to update date and time
  function updateDateTime() {
    var now = new Date();
    var dateTimeString = now.toLocaleString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: false });
    document.getElementById('date-time').textContent = dateTimeString;
  }

  // Function to update weather data from OpenWeatherMap API
  function updateWeatherData() {
    // Replace 'YOUR_API_KEY' with your actual OpenWeatherMap API key
    var apiKey = 'fbae867d03fc9892a7469d2f562ce558';
    var city = 'Bangkok'; // Replace with your city name
    var apiUrl = 'https://api.openweathermap.org/data/2.5/weather?q=' + city + '&appid=' + apiKey;

    fetch(apiUrl)
      .then(response => response.json())
      .then(data => {
        // Extract relevant weather data
        var weatherCondition = data.weather[0].main;
        var weatherDescription = data.weather[0].description;
        var temperatureKelvin = data.main.temp;

        // Convert temperature from Kelvin to Celsius
        var temperatureCelsius = temperatureKelvin - 273.15;

        // Update weather icon, description, and temperature
        updateWeatherIcon(weatherCondition);
        document.getElementById('weather-description').textContent = 'Weather: ' + weatherDescription;
        document.getElementById('temperature').textContent = 'Temperature: ' + temperatureCelsius.toFixed(2) + '°C';
      })
      .catch(error => console.error('Error fetching weather data:', error));
  }


  // Function to update weather icon
  function updateWeatherIcon(weatherCondition) {
    var iconClass;

    // Add logic to determine the appropriate weather icon based on the condition
    switch (weatherCondition.toLowerCase()) {
      case 'clear':
        iconClass = 'fa-sun';
        break;
      case 'clouds':
        iconClass = 'fa-cloud';
        break;
      case 'rain':
        iconClass = 'fa-cloud-showers-heavy';
        break;
      default:
        iconClass = 'fa-question-circle'; // Default to a question mark icon for unknown conditions
    }

    // Set the appropriate icon class
    document.getElementById('weather-icon').innerHTML = '<i class="fa ' + iconClass + '" aria-hidden="true"></i>';
  }

  // Call the functions initially
  updateDateTime();
  updateWeatherData();

  // Update date and time every second
  setInterval(updateDateTime, 1000);

  // Update weather data every 10 minutes (adjust as needed)
  setInterval(updateWeatherData, 600000);
</script>
<script>
  $(".sidebar-dropdown > a").click(function () {
    $(".sidebar-submenu").slideUp(200);
    if (
      $(this)
        .parent()
        .hasClass("active")
    ) {
      $(".sidebar-dropdown").removeClass("active");
      $(this)
        .parent()
        .removeClass("active");
    } else {
      $(".sidebar-dropdown").removeClass("active");
      $(this)
        .next(".sidebar-submenu")
        .slideDown(200);
      $(this)
        .parent()
        .addClass("active");
    }
  });

  $("#close-sidebar").click(function () {
    $(".page-wrapper").removeClass("toggled");
  });
  $("#show-sidebar").click(function () {
    $(".page-wrapper").addClass("toggled");
  });



</script>

<script src="{{ url_for('static', filename='js/sb-admin-2.min.js') }}"></script>

</html>