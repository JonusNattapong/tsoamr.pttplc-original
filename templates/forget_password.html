<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-language" content="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forget Password</title>

    <!-- Stylesheet
    <link rel="stylesheet" href="/HOME (Doing Here)/templates/Css/home.css"> -->
        
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap Scripts -->
   
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- Bootstrap Datepicker Stylesheet and Script -->
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/sb-admin-2.css') }}">
    
    

</head>
<body class="bg-gradient-primary1">
   
    <div class="container">

        <!-- Outer Row -->
        <div class="row justify-content-center">


                <div class="card o-hidden border-0 shadow-lg my-5" >
                    <div class="card-body p-0" >
                        <!-- Nested Row within Card Body -->
                        
                        <div class="row" >
                            <div class="col-lg-6 d-none d-lg-block bg-login-image">
                                <img src="/static/img/1200px-PTT-01.svg.png" alt="PTT Logo" class="overlay-image">
                                <p class="typewriter-text line1">Automatic Meter Reading</p>
                                <p class="typewriter-text line2">Gas Transmission Pipeline</p>
                                <p class="typewriter-text line3">PTT Public Company Limited.</p>
                            </div>
                            
                            <div class="col-lg-6">
                                <div class="p-5">
                                    
                                    <form class="user" method="post"action="{{ url_for('forget_password') }}" style="margin-top: -30px; position: relative; z-index: 9999;">
                                        <div class="text-center">
                                            <img src="/static/img/forget.png" alt="" style="width: 80%; height: auto;margin-top: -100px;">
                                            
                                        </div>
                                        <div class="br1" style="margin-top: 4px;"></div>
                                        <div class="form-group">
                                            <input type="text" placeholder="Username" class="form-control form-control-user"
                                                id="exampleInputEmail" id="username" name="username" required />
                                                {% if error_message %}
                                                <span class="text-danger" style="margin-left: 10px; font-size: x-small;">{{ error_message }}</span>
                                            {% endif %}
                                        </div>
                                        <div class="br" style="margin-top: 15px;"></div>
                                        <div class="form-group">
                                            <input type="email" placeholder="Email" class="form-control form-control-user"
                                                id="exampleInputEmail" name="email" required>
                                          
                                        </div>
                                    
                                        <button style="margin-top: 10%;" type="submit" class="btn btn-primary btn-user btn-block">Submit</button>
                                        <hr>
                                        <p class="change-text" style="font-size:small; text-align: center;">
                                            <a href="login" class="change-link">Login!</a>
                                        </p>
                                    </form>
                                    
                                   
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            
          
 
    </div>
    
   
</body>


<script>


    document.addEventListener("DOMContentLoaded", function () {
        const passwordInput = document.getElementById("exampleInputPassword");
        const toggleIcon = document.querySelector(".toggle-password");

        // Function to show or hide the toggle icon
        function updateToggleIconVisibility() {
            if (passwordInput.value.length > 0) {
                toggleIcon.style.display = "block";
            } else {
                toggleIcon.style.display = "none";
            }
        }

        // Initial check when page loads
        updateToggleIconVisibility();

        // Show or hide the icon when the input is focused or blurred
        passwordInput.addEventListener("input", updateToggleIconVisibility);
        passwordInput.addEventListener("focus", updateToggleIconVisibility);
        passwordInput.addEventListener("blur", updateToggleIconVisibility);

        // Toggle password visibility on icon click
        toggleIcon.addEventListener("click", () => {
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                toggleIcon.classList.remove("fa-eye");
                toggleIcon.classList.add("fa-eye-slash");
            } else {
                passwordInput.type = "password";
                toggleIcon.classList.remove("fa-eye-slash");
                toggleIcon.classList.add("fa-eye");
            }
        });
    });


    const rememberedCheckbox = document.getElementById("cbx-46");
    const storedRememberedPassword = localStorage.getItem("rememberedPassword");

    if (storedRememberedPassword) {
        rememberedCheckbox.checked = true;
    }

    rememberedCheckbox.addEventListener("change", function () {
        if (this.checked) {
            localStorage.setItem("rememberedPassword", "yourPasswordValueHere");
        } else {
            localStorage.removeItem("rememberedPassword");
        }
    });

    const form = document.querySelector("form");
    eField = form.querySelector(".username"),
        eInput = eField.querySelector("input"),
        pField = form.querySelector(".password"),
        pInput = pField.querySelector("input");
    form.onsubmit = (e) => {
        e.preventDefault(); //preventing form submission
        //if username and password are blank then add shake class, else call specified function
        (eInput.value == "") ? eField.classList.add("shake", "error") : checkUsername();
        (pInput.value == "") ? pField.classList.add("shake", "error") : checkPass();

        setTimeout(() => { //remove shake class after 500ms
            eField.classList.remove("shake");
            pField.classList.remove("shake");
        }, 500);

        eInput.onkeyup = () => { checkUsername(); } //calling checkUsername function on username input keyup
        pInput.onkeyup = () => { checkPass(); } //calling checkPassword function on pass input keyup

        function checkUsername() { //checkUsername function
            if (eInput.value == "") { //if username is empty then add error and remove valid class
                eField.classList.add("error");
                eField.classList.remove("valid");
                let errorTxt = eField.querySelector(".error-txt");
                //if username value is not empty then show please enter valid username else show Username can't be blank
                (eInput.value != "") ? errorTxt.innerText = "Enter a valid username" : errorTxt.innerText = "Username can't be blank";
            } else { //if username is not empty then remove error and add valid class
                eField.classList.remove("error");
                eField.classList.add("valid");
            }
        }

        function checkPass() { //checkPass function
            if (pInput.value == "") { //if pass is empty then add error and remove valid class
                pField.classList.add("error");
                pField.classList.remove("valid");
            } else { //if pass is not empty then remove error and add valid class
                pField.classList.remove("error");
                pField.classList.add("valid");
            }
        }

        //if eField and pField don't contain error class, that means the user filled in details properly
        if (!eField.classList.contains("error") && !pField.classList.contains("error")) {
            window.location.href = form.getAttribute("action"); //redirecting user to the specified URL which is inside the action attribute of the form tag
        }
    }
</script>

</html>

